{{ "custom-email-subscription.css" | asset_url | stylesheet_tag }}
{% assign fontFamily = "'Inter', sans-serif" %}

{% style %}
body {
    font-family: {{ fontFamily }};
  }
.custom-email-subscription--{{ section.id }} {
  background-color: {{ section.settings.section_background }};
  padding-top: {{ section.settings.padding_top | divided_by: 2 }}px;
  padding-bottom: {{ section.settings.padding_bottom | divided_by: 2 }}px;
}

@media screen and (max-width: 749px) {
  .custom-email-subscription--{{ section.id }} {
    background-color: {{ section.settings.section_background }};
    padding-top: {{ section.settings.padding_top }}px;
    padding-bottom: {{ section.settings.padding_bottom }}px;
    .custom-email-subscription-title {
        font-size: 28px;
    }

    .email-subscription-form input[type="email"] {
        width: 80%; /* Adjust width to fit screen */
        margin-right: 0;
        margin-bottom: 10px;
    }

    .email-subscription-form button {
        width: 80%; /* Adjust width to fit screen */
    }
  }
}
.custom-email-subscription-title{
    text-align:center;
    font-weight:600;
    font-size:42px
}
.email-subscription-form {
  display: flex;
  justify-content: center;
  align-items: center;
  flex-wrap: wrap;
}

.email-subscription-form input[type="email"] {
  padding: 10px;
  margin-right: 10px;
  border: 1px solid #5C6E4A;
  border-radius: 18px;
  width:300px;
}

.email-subscription-form button {
  padding: 10px 20px;
  background-color: #5C6E4A;
  color: #fff;
  border: none;
  border-radius: 18px;
  cursor: pointer;
  width:140px;
}


{% endstyle %}

<div class="custom-email-subscription--{{ section.id }}">
  <h2 class="custom-email-subscription-title">{{ section.settings.heading }}</h2>
  <form action="{{ section.settings.button_link }}" method="post" class="email-subscription-form">
    <input type="email" name="email" placeholder="Email Address" required>
    <button type="submit">{{ section.settings.button_label }}</button>
  </form>
  <div id="subscription-status" style="display: none;">Thank you for subscribing!</div>

</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
      var form = document.getElementById('email-subscription-form');
      var statusMessage = document.getElementById('subscription-status');
  
      form.addEventListener('submit', function(event) {
        event.preventDefault();
        var email = document.getElementById('email').value;
  
        // Send the email address to Shopify's API to handle subscription
        fetch('/account/signup', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'X-Requested-With': 'XMLHttpRequest'
          },
          body: JSON.stringify({ email: email })
        })
        .then(response => {
          if (response.ok) {
            // Display confirmation message
            statusMessage.style.display = 'block';
            form.reset();
          }
        })
        .catch(error => console.error('Error:', error));
      });
    });
  </script>



{% schema %}
    {
     "name": "custom-Email-subscription",
     "tag": "section",
     "class": "section",
     "settings": [

        {
            "type": "text",
            "id": "heading",
            "label": "Heading",
            "placeholder": "Heading",
            "default": "Subscribe to our Newsletter"
          },
          {
            "type": "color",
            "id": "section_background",
            "label": "Section Background",
            "default": "#EDFF84"
          },
          
          {
              "type": "text",
              "id": "button_label",
              "label": "Button label",
              "default": "Subscribe"
              
          },
          {
                  "type": "url",
                  "id": "button_link",
                  "label": "Button url"
          },
          {
              "type": "header",
              "content": "Section padding"
          },
          {
              "type": "range",
              "id": "padding_top",
              "min": 0,
              "max": 100,
              "step": 10,
              "unit": "px",
              "label": "Padding Top",
              "default": 0
          },
          {
              "type": "range",
              "id": "padding_bottom",
              "min": 0,
              "max": 100,
              "step": 10,
              "unit": "px",
              "label": "Padding Bottom",
              "default": 0
          }
     ],
     "presets": [
        {
            "name": "custom-Email-subscription"
           }
     ]
    }
{% endschema %}